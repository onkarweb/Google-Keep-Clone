<!-- app.component.html -->
<div class="app-container">

  <!-- CONNECT CARD -->
  <ng-container *ngIf="connectionStatus !== 'Connected'">
    <div class="connect-card">
      <h2>Join Session</h2>
      <input type="text" [(ngModel)]="username" placeholder="Enter your name" class="username-input" />
      <button class="connect-btn" (click)="connect()">Connect</button>
      <p class="error-msg" *ngIf="connectionStatus !== 'Connecting...'">
        {{ connectionStatus }}
      </p>
    </div>
  </ng-container>

  <!-- STATUS BAR -->
  <ng-container *ngIf="connectionStatus === 'Connected'">
    <div class="status-bar">
      <span>ðŸŸ¢ Connected as <strong>{{ username }}</strong></span>
      <img [src]="userIcon" alt="Your icon" class="status-icon" />
    </div>

    <!-- TOOLBAR -->
    <div class="toolbar">
      <button (click)="format('bold')" title="Bold"><b>B</b></button>
      <button (click)="format('italic')" title="Italic"><i>I</i></button>
      <button (click)="format('underline')" title="Underline"><u>U</u></button>
    </div>

    <!-- NOTE AREA + CURSORS -->
    <div class="note-container">
      <div #noteArea id="noteDiv" contenteditable="true" class="note" data-placeholder="Start typing your note..."
        (input)="onInput()" (keyup)="updateCursor()" (click)="updateCursor()"></div>

      <div class="remote-cursors">
        <ng-container *ngFor="let entry of remoteCursorEntries">
          <div class="remote-cursor" [ngStyle]="{ 'left.px': entry[1].x, 'top.px': entry[1].y - 20 }">
            <img [src]="entry[1].icon" class="cursor-icon" />
            <div class="blinking-caret"></div>
          </div>
        </ng-container>
      </div>
    </div>
  </ng-container>

</div>